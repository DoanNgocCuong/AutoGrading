<div id="question-choice-modal" >
    <div class="modal-header">
      <button class="back-button"><</button>
      <span class="modal-title">{{name}}</span>
      <button class="close-button">×</button>
    </div>
    <div class="search-container">
      <input type="text" placeholder="Tìm kiếm câu hỏi..." class="search-bar">
    </div>
    <div id="questionList">
        {{#each questions}}
            <div class="question-container" data-question-index="{{@index}}">

                <div class="quesiton-icon"></div>
                <div class="quesiton-info">
                    <div class="quesiton-name">{{title}}</div>
                    <div class="question-content">
                    <span class="content-short" data-max-length="100">{{content}}</span>
                    <span class="content-full">{{content}}</span>
                    </div>
                    <div class="criteria-count">Number of criteria: {{criteriaCount}}</div>
                    <div class="criteria-container">
                    
                    <div class="criteria-list">
                        <label><input type="radio" name="criteria-{{questionId}}" value="criteria1"> Criteria 1</label>
                        <label><input type="radio" name="criteria-{{questionId}}" value="criteria2"> Criteria 2</label>
                        <label><input type="radio" name="criteria-{{questionId}}" value="criteria3"> Criteria 3</label>
                        <!-- Add more criteria as needed -->
                    </div>
                    </div>
                </div>
                <button class="select-button">Select</button>
            </div>
            
        {{/each}}
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const questionContainers = document.querySelectorAll('.question-container');
  
  questionContainers.forEach(container => {
    const contentShort = container.querySelector('.content-short');
    const maxLength = contentShort.getAttribute('data-max-length');
    
    if (maxLength && contentShort.textContent.length > maxLength) {
      const fullText = contentShort.textContent;
      const truncatedText = fullText.slice(0, maxLength) + '...';
      contentShort.textContent = truncatedText;
    }
    
    container.addEventListener('click', function(event) {
      if (event.target.classList.contains('select-button')) {
        const criteriaList = container.querySelectorAll('input[type="radio"]');
        let criteriaSelected = false;
        
        criteriaList.forEach(criteria => {
          if (criteria.checked) {
            criteriaSelected = true;
          }
        });
        
        if (!criteriaSelected) {
          alert('Please select a criteria before proceeding.');
          event.preventDefault();
        }
      } else {
        container.classList.toggle('expanded');
      }
    });
  });
});

</script>