<div class="login-container">
    <div class="login-box">
        <form id="loginForm">
            <h2 style="color: #064050">Đăng Nhập</h2>
            <p id="errorMessage" style="color: rgb(113, 2, 2); display: none;">Tên tài khoản hoặc mật khẩu không đúng.</p>
            <div class="form-group">
                <label for="username">Tài khoản</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="form-group">
                <label for="password">Mật khẩu</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div class="form-group">
                <a href="/forgot-password">Quên mật khẩu?</a>
            </div>
            <button type="submit" >Đăng nhập</button>
        </form>
        
    </div>
</div>


<script>
document.getElementById('loginForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    fetch('popup/login.json', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ username: username, password: password })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Assuming the server responds with { success: true, userId: ..., role: ... }
            console.log(`User ID: ${data.userId}, Role: ${data.role}`);
            switch(data.role) {
                case 'teacher':
                    window.location.href = '/mylibraryteacher';
                    break;
                case 'student':
                    window.location.href = '/mylibrarystudent';
                    break;
                case 'admin':
                    window.location.href = '/mylibraryadmin';
                    break;
                case 'leader':
                    window.location.href = '/mylibraryleader';
                    break;
                default:
                    console.error('Unknown role:', data.role);
            }
        } else {
            // Show error message
            document.getElementById('errorMessage').style.display = 'block';
        }
    })
    .catch(error => {
        console.error('Error:', error);
        // Show error message
        document.getElementById('errorMessage').style.display = 'block';
    });
});
</script>

